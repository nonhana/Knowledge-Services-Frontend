<template>
  <div name="institutionalMapDIY" class="institutionalMapDIY-wrap">
    <el-row type="flex" justify="center" style="margin: 20px 0 40px 0">
      <span class="title">{{ itemInfo.institution_title }}</span>
    </el-row>
    <el-row type="flex" justify="start">
      <div style="margin: 0 50px 0 0">
        <el-menu default-active="0" class="el-menu-vertical-demo">
          <template v-for="(item, index) in itemInfo.institution_details">
            <el-sub-menu
              v-if="item.details_child.length > 0"
              :key="`submenu${index}`"
              :index="String(index)"
            >
              <template #title>
                <span>{{ item.details_title }}</span>
              </template>
              <el-menu-item
                v-for="(child, child_index) in item.details_child"
                :key="child_index"
                :index="`${index}-${child_index}`"
                @click="content = child.child_content"
                @mouseenter="itemHovering = `${index}-${child_index}`"
              >
                <span>
                  {{ child.child_title }}
                </span>
                <el-dropdown
                  style="right: 20px; position: absolute"
                  v-if="itemHovering === `${index}-${child_index}`"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    fill="none"
                    version="1.1"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                  >
                    <defs>
                      <clipPath id="master_svg0_126_1214">
                        <rect x="0" y="0" width="24" height="24" rx="0" />
                      </clipPath>
                    </defs>
                    <g clip-path="url(#master_svg0_126_1214)">
                      <g>
                        <path
                          d="M7.498736459960938,11.99797205078125Q7.498736459960938,12.10849205078125,7.4879064599609375,12.21847205078125Q7.477076459960937,12.32846205078125,7.455516459960937,12.43685205078125Q7.433956459960937,12.54525205078125,7.4018764599609375,12.65100205078125Q7.369786459960937,12.75676205078125,7.327496459960938,12.858872050781251Q7.285206459960937,12.96097205078125,7.233106459960937,13.05844205078125Q7.181006459960938,13.15590205078125,7.119606459960938,13.24780205078125Q7.058206459960937,13.33969205078125,6.988096459960937,13.42512205078125Q6.917986459960938,13.51055205078125,6.839836459960937,13.58870205078125Q6.7616964599609375,13.66684205078125,6.676266459960937,13.73695205078125Q6.590836459960938,13.80706205078125,6.498936459960937,13.86846205078125Q6.407046459960938,13.92986205078125,6.309586459960938,13.981962050781249Q6.212116459960937,14.03406205078125,6.110006459960937,14.07635205078125Q6.007906459960937,14.11865205078125,5.902146459960937,14.15073205078125Q5.796386459960937,14.18281205078125,5.687996459960937,14.204372050781249Q5.579606459960937,14.22593205078125,5.469616459960937,14.23676205078125Q5.359636459960937,14.24759205078125,5.249116459960938,14.24759205078125Q5.138606459960938,14.24759205078125,5.028616459960937,14.23676205078125Q4.918636459960938,14.22593205078125,4.8102364599609375,14.204372050781249Q4.7018464599609375,14.18281205078125,4.5960864599609375,14.15073205078125Q4.490326459960937,14.11864205078125,4.388226459960937,14.07635205078125Q4.286116459960938,14.03406205078125,4.188656459960938,13.981962050781249Q4.091186459960937,13.92986205078125,3.9992954599609374,13.86846205078125Q3.9074034599609373,13.80706205078125,3.8219734599609376,13.73695205078125Q3.7365424599609374,13.66684205078125,3.6583954599609374,13.58870205078125Q3.5802484599609374,13.51055205078125,3.5101374599609376,13.42512205078125Q3.4400254599609377,13.33969205078125,3.3786264599609375,13.24779205078125Q3.3172264599609376,13.15590205078125,3.2651284599609376,13.05844205078125Q3.2130314599609373,12.96097205078125,3.1707384599609374,12.858872050781251Q3.1284454599609375,12.75676205078125,3.0963643599609374,12.65100205078125Q3.0642830599609376,12.54525205078125,3.0427222599609376,12.43685205078125Q3.0211615599609374,12.32846205078125,3.0103289599609373,12.21847205078125Q2.9994964599609375,12.10849205078125,2.9994964599609375,11.99797205078125Q2.9994964599609375,11.88746205078125,3.0103289599609373,11.777472050781249Q3.0211615599609374,11.66749205078125,3.0427222599609376,11.55909205078125Q3.0642830599609376,11.45070205078125,3.0963643599609374,11.344942050781249Q3.1284454599609375,11.23918205078125,3.1707384599609374,11.13708205078125Q3.2130314599609373,11.03497205078125,3.2651284599609376,10.93751205078125Q3.3172264599609376,10.84004205078125,3.3786264599609375,10.74815105078125Q3.4400254599609377,10.65626005078125,3.5101374599609376,10.57082905078125Q3.5802484599609374,10.48539805078125,3.6583954599609374,10.40725105078125Q3.7365424599609374,10.32910405078125,3.8219734599609376,10.25899305078125Q3.9074034599609373,10.18888205078125,3.9992954599609374,10.12748205078125Q4.091186459960937,10.06608205078125,4.188656459960938,10.01398505078125Q4.286116459960938,9.96188705078125,4.388226459960937,9.91959405078125Q4.490326459960937,9.87730105078125,4.5960864599609375,9.84522005078125Q4.7018464599609375,9.81313865078125,4.8102364599609375,9.79157795078125Q4.918636459960938,9.77001715078125,5.028616459960937,9.75918455078125Q5.138606459960938,9.74835205078125,5.249116459960938,9.74835205078125Q5.359636459960937,9.74835205078125,5.469616459960937,9.75918455078125Q5.579606459960937,9.77001715078125,5.687996459960937,9.79157795078125Q5.796386459960937,9.81313865078125,5.902146459960937,9.84522005078125Q6.007906459960937,9.87730105078125,6.110006459960937,9.91959405078125Q6.212116459960937,9.96188705078125,6.309586459960938,10.01398505078125Q6.407046459960938,10.06608205078125,6.498936459960937,10.12748205078125Q6.590836459960938,10.18888205078125,6.676266459960937,10.25899305078125Q6.7616964599609375,10.32910405078125,6.839836459960937,10.40725105078125Q6.917986459960938,10.48539805078125,6.988096459960937,10.57082905078125Q7.058206459960937,10.65626005078125,7.119606459960938,10.74815105078125Q7.181006459960938,10.84004205078125,7.233106459960937,10.93751205078125Q7.285206459960937,11.03497205078125,7.327496459960938,11.13708205078125Q7.369786459960937,11.23918205078125,7.4018764599609375,11.344942050781249Q7.433956459960937,11.45070205078125,7.455516459960937,11.55909205078125Q7.477076459960937,11.66749205078125,7.4879064599609375,11.777472050781249Q7.498736459960938,11.88746205078125,7.498736459960938,11.99797205078125Z"
                          fill="#575B66"
                          fill-opacity="1"
                        />
                      </g>
                      <g>
                        <path
                          d="M14.247599680175782,11.99797205078125Q14.247599680175782,12.10849205078125,14.236769680175781,12.21847205078125Q14.225939680175781,12.32846205078125,14.20437968017578,12.43685205078125Q14.18281968017578,12.54525205078125,14.150739680175782,12.65100205078125Q14.118649680175782,12.75676205078125,14.07635968017578,12.858872050781251Q14.034069680175781,12.96097205078125,13.98196968017578,13.05844205078125Q13.92986968017578,13.15590205078125,13.868469680175782,13.24780205078125Q13.80706968017578,13.33969205078125,13.736959680175781,13.42512205078125Q13.666849680175782,13.51055205078125,13.58869968017578,13.58870205078125Q13.510559680175781,13.66684205078125,13.42512968017578,13.73695205078125Q13.339699680175782,13.80706205078125,13.247799680175781,13.86846205078125Q13.155909680175782,13.92986205078125,13.058449680175782,13.981962050781249Q12.96097968017578,14.03406205078125,12.858869680175781,14.07635205078125Q12.75676968017578,14.11865205078125,12.65100968017578,14.15073205078125Q12.54524968017578,14.18281205078125,12.43685968017578,14.204372050781249Q12.32846968017578,14.22593205078125,12.218479680175781,14.23676205078125Q12.10849968017578,14.24759205078125,11.997979680175781,14.24759205078125Q11.887469680175782,14.24759205078125,11.77747968017578,14.23676205078125Q11.667499680175782,14.22593205078125,11.55909968017578,14.204372050781249Q11.45070968017578,14.18281205078125,11.34494968017578,14.15073205078125Q11.239189680175782,14.11864205078125,11.137089680175782,14.07635205078125Q11.03497968017578,14.03406205078125,10.93751968017578,13.981962050781249Q10.840049680175781,13.92986205078125,10.74815868017578,13.86846205078125Q10.656266680175781,13.80706205078125,10.57083668017578,13.73695205078125Q10.48540568017578,13.66684205078125,10.407258680175781,13.58870205078125Q10.329111680175782,13.51055205078125,10.259000680175781,13.42512205078125Q10.188888680175781,13.33969205078125,10.127489680175781,13.24779205078125Q10.06608968017578,13.15590205078125,10.013991680175781,13.05844205078125Q9.961894680175782,12.96097205078125,9.91960168017578,12.858872050781251Q9.877308680175782,12.75676205078125,9.84522758017578,12.65100205078125Q9.813146280175781,12.54525205078125,9.791585480175781,12.43685205078125Q9.770024780175781,12.32846205078125,9.75919218017578,12.21847205078125Q9.748359680175781,12.10849205078125,9.748359680175781,11.99797205078125Q9.748359680175781,11.88746205078125,9.75919218017578,11.777472050781249Q9.770024780175781,11.66749205078125,9.791585480175781,11.55909205078125Q9.813146280175781,11.45070205078125,9.84522758017578,11.344942050781249Q9.877308680175782,11.23918205078125,9.91960168017578,11.13708205078125Q9.961894680175782,11.03497205078125,10.013991680175781,10.93751205078125Q10.06608968017578,10.84004205078125,10.127489680175781,10.74815105078125Q10.188888680175781,10.65626005078125,10.259000680175781,10.57082905078125Q10.329111680175782,10.48539805078125,10.407258680175781,10.40725105078125Q10.48540568017578,10.32910405078125,10.57083668017578,10.25899305078125Q10.656266680175781,10.18888205078125,10.74815868017578,10.12748205078125Q10.840049680175781,10.06608205078125,10.93751968017578,10.01398505078125Q11.03497968017578,9.96188705078125,11.137089680175782,9.91959405078125Q11.239189680175782,9.87730105078125,11.34494968017578,9.84522005078125Q11.45070968017578,9.81313865078125,11.55909968017578,9.79157795078125Q11.667499680175782,9.77001715078125,11.77747968017578,9.75918455078125Q11.887469680175782,9.74835205078125,11.997979680175781,9.74835205078125Q12.10849968017578,9.74835205078125,12.218479680175781,9.75918455078125Q12.32846968017578,9.77001715078125,12.43685968017578,9.79157795078125Q12.54524968017578,9.81313865078125,12.65100968017578,9.84522005078125Q12.75676968017578,9.87730105078125,12.858869680175781,9.91959405078125Q12.96097968017578,9.96188705078125,13.058449680175782,10.01398505078125Q13.155909680175782,10.06608205078125,13.247799680175781,10.12748205078125Q13.339699680175782,10.18888205078125,13.42512968017578,10.25899305078125Q13.510559680175781,10.32910405078125,13.58869968017578,10.40725105078125Q13.666849680175782,10.48539805078125,13.736959680175781,10.57082905078125Q13.80706968017578,10.65626005078125,13.868469680175782,10.74815105078125Q13.92986968017578,10.84004205078125,13.98196968017578,10.93751205078125Q14.034069680175781,11.03497205078125,14.07635968017578,11.13708205078125Q14.118649680175782,11.23918205078125,14.150739680175782,11.344942050781249Q14.18281968017578,11.45070205078125,14.20437968017578,11.55909205078125Q14.225939680175781,11.66749205078125,14.236769680175781,11.777472050781249Q14.247599680175782,11.88746205078125,14.247599680175782,11.99797205078125Z"
                          fill="#575B66"
                          fill-opacity="1"
                        />
                      </g>
                      <g>
                        <path
                          d="M18.750878850097656,14.24759205078125C17.509158850097656,14.24759205078125,16.501258850097656,13.23970205078125,16.501258850097656,11.99797205078125C16.501258850097656,10.75625205078125,17.509158850097656,9.74835205078125,18.750878850097656,9.74835205078125C19.992608850097657,9.74835205078125,21.000498850097657,10.75625205078125,21.000498850097657,11.99797205078125C21.000498850097657,13.23970205078125,19.988578850097657,14.24759205078125,18.750878850097656,14.24759205078125Z"
                          fill="#575B66"
                          fill-opacity="1"
                        />
                      </g>
                    </g>
                  </svg>
                  <template #dropdown>
                    <el-dropdown-menu>
                      <el-dropdown-item
                        @click="editItem(`${index}-${child_index}`)"
                        >编辑</el-dropdown-item
                      >
                    </el-dropdown-menu>
                  </template>
                </el-dropdown>
              </el-menu-item>
            </el-sub-menu>
            <el-menu-item
              v-else
              :key="`menuitem${index}`"
              :index="String(index)"
              @click="content = item.details_content"
              @mouseenter="itemHovering = String(index)"
            >
              <span>
                {{ item.details_title }}
              </span>
              <el-dropdown
                style="right: 20px; position: absolute"
                v-if="itemHovering === String(index)"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                  fill="none"
                  version="1.1"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                >
                  <defs>
                    <clipPath id="master_svg0_126_1214">
                      <rect x="0" y="0" width="24" height="24" rx="0" />
                    </clipPath>
                  </defs>
                  <g clip-path="url(#master_svg0_126_1214)">
                    <g>
                      <path
                        d="M7.498736459960938,11.99797205078125Q7.498736459960938,12.10849205078125,7.4879064599609375,12.21847205078125Q7.477076459960937,12.32846205078125,7.455516459960937,12.43685205078125Q7.433956459960937,12.54525205078125,7.4018764599609375,12.65100205078125Q7.369786459960937,12.75676205078125,7.327496459960938,12.858872050781251Q7.285206459960937,12.96097205078125,7.233106459960937,13.05844205078125Q7.181006459960938,13.15590205078125,7.119606459960938,13.24780205078125Q7.058206459960937,13.33969205078125,6.988096459960937,13.42512205078125Q6.917986459960938,13.51055205078125,6.839836459960937,13.58870205078125Q6.7616964599609375,13.66684205078125,6.676266459960937,13.73695205078125Q6.590836459960938,13.80706205078125,6.498936459960937,13.86846205078125Q6.407046459960938,13.92986205078125,6.309586459960938,13.981962050781249Q6.212116459960937,14.03406205078125,6.110006459960937,14.07635205078125Q6.007906459960937,14.11865205078125,5.902146459960937,14.15073205078125Q5.796386459960937,14.18281205078125,5.687996459960937,14.204372050781249Q5.579606459960937,14.22593205078125,5.469616459960937,14.23676205078125Q5.359636459960937,14.24759205078125,5.249116459960938,14.24759205078125Q5.138606459960938,14.24759205078125,5.028616459960937,14.23676205078125Q4.918636459960938,14.22593205078125,4.8102364599609375,14.204372050781249Q4.7018464599609375,14.18281205078125,4.5960864599609375,14.15073205078125Q4.490326459960937,14.11864205078125,4.388226459960937,14.07635205078125Q4.286116459960938,14.03406205078125,4.188656459960938,13.981962050781249Q4.091186459960937,13.92986205078125,3.9992954599609374,13.86846205078125Q3.9074034599609373,13.80706205078125,3.8219734599609376,13.73695205078125Q3.7365424599609374,13.66684205078125,3.6583954599609374,13.58870205078125Q3.5802484599609374,13.51055205078125,3.5101374599609376,13.42512205078125Q3.4400254599609377,13.33969205078125,3.3786264599609375,13.24779205078125Q3.3172264599609376,13.15590205078125,3.2651284599609376,13.05844205078125Q3.2130314599609373,12.96097205078125,3.1707384599609374,12.858872050781251Q3.1284454599609375,12.75676205078125,3.0963643599609374,12.65100205078125Q3.0642830599609376,12.54525205078125,3.0427222599609376,12.43685205078125Q3.0211615599609374,12.32846205078125,3.0103289599609373,12.21847205078125Q2.9994964599609375,12.10849205078125,2.9994964599609375,11.99797205078125Q2.9994964599609375,11.88746205078125,3.0103289599609373,11.777472050781249Q3.0211615599609374,11.66749205078125,3.0427222599609376,11.55909205078125Q3.0642830599609376,11.45070205078125,3.0963643599609374,11.344942050781249Q3.1284454599609375,11.23918205078125,3.1707384599609374,11.13708205078125Q3.2130314599609373,11.03497205078125,3.2651284599609376,10.93751205078125Q3.3172264599609376,10.84004205078125,3.3786264599609375,10.74815105078125Q3.4400254599609377,10.65626005078125,3.5101374599609376,10.57082905078125Q3.5802484599609374,10.48539805078125,3.6583954599609374,10.40725105078125Q3.7365424599609374,10.32910405078125,3.8219734599609376,10.25899305078125Q3.9074034599609373,10.18888205078125,3.9992954599609374,10.12748205078125Q4.091186459960937,10.06608205078125,4.188656459960938,10.01398505078125Q4.286116459960938,9.96188705078125,4.388226459960937,9.91959405078125Q4.490326459960937,9.87730105078125,4.5960864599609375,9.84522005078125Q4.7018464599609375,9.81313865078125,4.8102364599609375,9.79157795078125Q4.918636459960938,9.77001715078125,5.028616459960937,9.75918455078125Q5.138606459960938,9.74835205078125,5.249116459960938,9.74835205078125Q5.359636459960937,9.74835205078125,5.469616459960937,9.75918455078125Q5.579606459960937,9.77001715078125,5.687996459960937,9.79157795078125Q5.796386459960937,9.81313865078125,5.902146459960937,9.84522005078125Q6.007906459960937,9.87730105078125,6.110006459960937,9.91959405078125Q6.212116459960937,9.96188705078125,6.309586459960938,10.01398505078125Q6.407046459960938,10.06608205078125,6.498936459960937,10.12748205078125Q6.590836459960938,10.18888205078125,6.676266459960937,10.25899305078125Q6.7616964599609375,10.32910405078125,6.839836459960937,10.40725105078125Q6.917986459960938,10.48539805078125,6.988096459960937,10.57082905078125Q7.058206459960937,10.65626005078125,7.119606459960938,10.74815105078125Q7.181006459960938,10.84004205078125,7.233106459960937,10.93751205078125Q7.285206459960937,11.03497205078125,7.327496459960938,11.13708205078125Q7.369786459960937,11.23918205078125,7.4018764599609375,11.344942050781249Q7.433956459960937,11.45070205078125,7.455516459960937,11.55909205078125Q7.477076459960937,11.66749205078125,7.4879064599609375,11.777472050781249Q7.498736459960938,11.88746205078125,7.498736459960938,11.99797205078125Z"
                        fill="#575B66"
                        fill-opacity="1"
                      />
                    </g>
                    <g>
                      <path
                        d="M14.247599680175782,11.99797205078125Q14.247599680175782,12.10849205078125,14.236769680175781,12.21847205078125Q14.225939680175781,12.32846205078125,14.20437968017578,12.43685205078125Q14.18281968017578,12.54525205078125,14.150739680175782,12.65100205078125Q14.118649680175782,12.75676205078125,14.07635968017578,12.858872050781251Q14.034069680175781,12.96097205078125,13.98196968017578,13.05844205078125Q13.92986968017578,13.15590205078125,13.868469680175782,13.24780205078125Q13.80706968017578,13.33969205078125,13.736959680175781,13.42512205078125Q13.666849680175782,13.51055205078125,13.58869968017578,13.58870205078125Q13.510559680175781,13.66684205078125,13.42512968017578,13.73695205078125Q13.339699680175782,13.80706205078125,13.247799680175781,13.86846205078125Q13.155909680175782,13.92986205078125,13.058449680175782,13.981962050781249Q12.96097968017578,14.03406205078125,12.858869680175781,14.07635205078125Q12.75676968017578,14.11865205078125,12.65100968017578,14.15073205078125Q12.54524968017578,14.18281205078125,12.43685968017578,14.204372050781249Q12.32846968017578,14.22593205078125,12.218479680175781,14.23676205078125Q12.10849968017578,14.24759205078125,11.997979680175781,14.24759205078125Q11.887469680175782,14.24759205078125,11.77747968017578,14.23676205078125Q11.667499680175782,14.22593205078125,11.55909968017578,14.204372050781249Q11.45070968017578,14.18281205078125,11.34494968017578,14.15073205078125Q11.239189680175782,14.11864205078125,11.137089680175782,14.07635205078125Q11.03497968017578,14.03406205078125,10.93751968017578,13.981962050781249Q10.840049680175781,13.92986205078125,10.74815868017578,13.86846205078125Q10.656266680175781,13.80706205078125,10.57083668017578,13.73695205078125Q10.48540568017578,13.66684205078125,10.407258680175781,13.58870205078125Q10.329111680175782,13.51055205078125,10.259000680175781,13.42512205078125Q10.188888680175781,13.33969205078125,10.127489680175781,13.24779205078125Q10.06608968017578,13.15590205078125,10.013991680175781,13.05844205078125Q9.961894680175782,12.96097205078125,9.91960168017578,12.858872050781251Q9.877308680175782,12.75676205078125,9.84522758017578,12.65100205078125Q9.813146280175781,12.54525205078125,9.791585480175781,12.43685205078125Q9.770024780175781,12.32846205078125,9.75919218017578,12.21847205078125Q9.748359680175781,12.10849205078125,9.748359680175781,11.99797205078125Q9.748359680175781,11.88746205078125,9.75919218017578,11.777472050781249Q9.770024780175781,11.66749205078125,9.791585480175781,11.55909205078125Q9.813146280175781,11.45070205078125,9.84522758017578,11.344942050781249Q9.877308680175782,11.23918205078125,9.91960168017578,11.13708205078125Q9.961894680175782,11.03497205078125,10.013991680175781,10.93751205078125Q10.06608968017578,10.84004205078125,10.127489680175781,10.74815105078125Q10.188888680175781,10.65626005078125,10.259000680175781,10.57082905078125Q10.329111680175782,10.48539805078125,10.407258680175781,10.40725105078125Q10.48540568017578,10.32910405078125,10.57083668017578,10.25899305078125Q10.656266680175781,10.18888205078125,10.74815868017578,10.12748205078125Q10.840049680175781,10.06608205078125,10.93751968017578,10.01398505078125Q11.03497968017578,9.96188705078125,11.137089680175782,9.91959405078125Q11.239189680175782,9.87730105078125,11.34494968017578,9.84522005078125Q11.45070968017578,9.81313865078125,11.55909968017578,9.79157795078125Q11.667499680175782,9.77001715078125,11.77747968017578,9.75918455078125Q11.887469680175782,9.74835205078125,11.997979680175781,9.74835205078125Q12.10849968017578,9.74835205078125,12.218479680175781,9.75918455078125Q12.32846968017578,9.77001715078125,12.43685968017578,9.79157795078125Q12.54524968017578,9.81313865078125,12.65100968017578,9.84522005078125Q12.75676968017578,9.87730105078125,12.858869680175781,9.91959405078125Q12.96097968017578,9.96188705078125,13.058449680175782,10.01398505078125Q13.155909680175782,10.06608205078125,13.247799680175781,10.12748205078125Q13.339699680175782,10.18888205078125,13.42512968017578,10.25899305078125Q13.510559680175781,10.32910405078125,13.58869968017578,10.40725105078125Q13.666849680175782,10.48539805078125,13.736959680175781,10.57082905078125Q13.80706968017578,10.65626005078125,13.868469680175782,10.74815105078125Q13.92986968017578,10.84004205078125,13.98196968017578,10.93751205078125Q14.034069680175781,11.03497205078125,14.07635968017578,11.13708205078125Q14.118649680175782,11.23918205078125,14.150739680175782,11.344942050781249Q14.18281968017578,11.45070205078125,14.20437968017578,11.55909205078125Q14.225939680175781,11.66749205078125,14.236769680175781,11.777472050781249Q14.247599680175782,11.88746205078125,14.247599680175782,11.99797205078125Z"
                        fill="#575B66"
                        fill-opacity="1"
                      />
                    </g>
                    <g>
                      <path
                        d="M18.750878850097656,14.24759205078125C17.509158850097656,14.24759205078125,16.501258850097656,13.23970205078125,16.501258850097656,11.99797205078125C16.501258850097656,10.75625205078125,17.509158850097656,9.74835205078125,18.750878850097656,9.74835205078125C19.992608850097657,9.74835205078125,21.000498850097657,10.75625205078125,21.000498850097657,11.99797205078125C21.000498850097657,13.23970205078125,19.988578850097657,14.24759205078125,18.750878850097656,14.24759205078125Z"
                        fill="#575B66"
                        fill-opacity="1"
                      />
                    </g>
                  </g>
                </svg>
                <template #dropdown>
                  <el-dropdown-menu>
                    <el-dropdown-item @click="editItem(String(index))"
                      >编辑</el-dropdown-item
                    >
                  </el-dropdown-menu>
                </template>
              </el-dropdown>
            </el-menu-item>
          </template>
        </el-menu>
        <div style="margin: 26px 0 0 0; display: flex; align-items: center">
          <el-select
            style="width: 140px"
            v-model="choosedRule"
            placeholder="规则类型选择"
          >
            <el-option
              v-for="item in ruleChoices"
              :key="item.value"
              :label="item.label"
              :value="item.value"
            />
          </el-select>
          <div
            @click="contentDialogVisible = true"
            style="background-color: #5677fc"
            class="circle-button"
          >
            <span>+</span>
          </div>
          <div style="background-color: #000" class="circle-button">
            <span>-</span>
          </div>
        </div>
        <div style="margin: 26px 0 0 0" class="input">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            fill="none"
            version="1.1"
            width="24"
            height="24"
            viewBox="0 0 24 24"
          >
            <defs>
              <clipPath id="master_svg0_124_1212">
                <rect x="0" y="0" width="24" height="24" rx="0" />
              </clipPath>
            </defs>
            <g clip-path="url(#master_svg0_124_1212)">
              <g>
                <path
                  d="M9,3C12.3,3,15,5.7,15,9C15,12.3,12.3,15,9,15C5.7,15,3,12.3,3,9C3,5.7,5.7,3,9,3ZM9,1.5C4.85625,1.5,1.5,4.85625,1.5,9C1.5,13.1437,4.85625,16.5,9,16.5C13.1438,16.5,16.5,13.1437,16.5,9C16.5,4.85625,13.1438,1.5,9,1.5ZM15.9,14.85L14.8313,15.9187L21.2063,22.2937L22.275,21.225L15.9,14.85Z"
                  fill="#3D3D3D"
                  fill-opacity="1"
                />
              </g>
            </g>
          </svg>
          <input placeholder="关键字搜索" v-model="keywords" type="text" />
        </div>
      </div>
      <div style="display: flex">
        <div class="content">
          <span>
            {{ content }}
          </span>
        </div>
        <table>
          <tr v-for="(item, index) in referenceData" :key="index">
            <td style="width: 50px">参考{{ index }}</td>
            <td>{{ item }}</td>
          </tr>
          <!-- 添加更多行和单元格，根据需要重复上述<tr>和<td>的结构 -->
        </table>
      </div>
    </el-row>
  </div>

  <!-- 新建规则弹窗，在el-dialog外层套一层div，便可以进行样式穿透 -->
  <div>
    <el-dialog
      v-model="contentDialogVisible"
      title="规则内容"
      :before-close="contentHandleClose"
      class="contentDialog"
    >
      <el-input
        v-model="rule_content"
        :autosize="{ minRows: 8, maxRows: 16 }"
        type="textarea"
        placeholder="请输入相应的规则内容"
      />
      <template #footer>
        <span class="dialog-footer">
          <el-button round @click="contentDialogActions(0)">取消</el-button>
          <el-button round type="primary" @click="contentDialogActions(1)">
            确定
          </el-button>
        </span>
      </template>
    </el-dialog>
  </div>

  <systemEditingWindow
    v-model:changeVisable="editDialogVisible"
    :visable="editDialogVisible"
  />
</template>

<script setup lang="ts">
import { ref, defineProps, onMounted } from "vue";
import { ElMessageBox } from "element-plus";
import systemEditingWindow from "./systemEditingWindow.vue";
// hover控制是否显示编辑按钮
let itemHovering = ref<string>("");
// 点击编辑按钮
const editDialogVisible = ref<boolean>(false);
const editItem = (index: string) => {
  console.log(index);
  editDialogVisible.value = true;
};
// 用props来接收父组件传递过来的数据
const props = defineProps<{
  itemInfo: {
    institution_id: number;
    institution_title: string;
    institution_details: {
      details_title: string;
      details_content: string;
      details_child: {
        child_title: string;
        child_content: string;
      }[];
    }[];
  };
}>();
let content = ref<string>(
  props.itemInfo.institution_details[0].details_content
);
// 选择规则类别进行添加/删除
const ruleChoices = [
  {
    label: "描述性规则",
    value: "描述性规则",
  },
  {
    label: "业务规则",
    value: "业务规则",
  },
];
let choosedRule = ref<string>("");
// 关键词搜索
let keywords = ref<string>("");
// 参考数据
const referenceData = [
  "中华人民共和国会计法",
  "中华人民共和国公司法",
  "中华人民共和国合同法",
  "中华人民共和国预算法",
  "中华人民共和国政府采购法实施条例",
  "中华人民共和国政府采购法实施条例",
  "中华人民共和国政府采购法实施条例",
  "公立医院预决算报告制度暂行规定",
  "电子文件管理暂行办法",
  "党政机关公务用车管理办法",
];
// 添加规则弹窗相关
const contentDialogVisible = ref<boolean>(false);
const contentHandleClose = (done: () => void) => {
  ElMessageBox.confirm("您的规则暂未添加，确认关闭？")
    .then(() => {
      done();
    })
    .catch(() => {});
};
const contentDialogActions = (num: number) => {
  switch (num) {
    case 0:
      contentDialogVisible.value = false;
      break;
    case 1:
      contentDialogVisible.value = false;
      console.log(rule_content.value);
      break;
  }
};
let rule_content = ref<string>(
  " 第一条 为了规范会计行为，保证会计资料真实、完整，加强经济管理和财务管理，提高经济效益，维护社会主义市场经济秩序，制定本法。    第二条 国家机关、社会团体、公司、企业、事业单位和其他组织（以下统称单位）必须依照本法办理会计事务。    第三条 各单位必须依法设置会计账簿，并保证其真实、完整。    第四条 单位负责人对本单位的会计工作和会计资料的真实性、完整性负责。    第五条 会计机构、会计人员依照本法规定进行会计核算，"
);

// 生命周期钩子
onMounted(() => {
  console.log(props.itemInfo);
});
</script>

<style scoped lang="less">
.institutionalMapDIY-wrap {
  position: relative;
  width: 1300px;
}

.title {
  color: #000;
  font-size: 18px;
  font-family: SourceHanSansSC-regular;
  font-weight: bold;
}

.circle-button {
  width: 20px;
  height: 20px;
  margin: 0 0 0 5px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  span {
    color: #fff;
    font-size: 16px;
    margin: -2px 0 0 0; /* 微调 */
  }
}

.input {
  width: 180px;
  height: 40px;
  padding: 10px;
  border-radius: 2px;
  background-color: rgba(250, 250, 250, 100);
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0px 2px 2px 0px rgba(0, 0, 0, 0.24);
  input {
    width: 150px;
    height: 48px;
    border: none;
    outline: none;
    background-color: transparent;
    color: rgba(16, 16, 16, 100);
    font-size: 14px;
    text-align: center;
    font-family: Roboto;
  }
}
.content {
  width: 720px;
  height: 400px;
  padding: 10px;
  border: 1px solid rgba(187, 187, 187, 100);
  overflow-y: scroll;
  span {
    line-height: 20px;
    color: rgba(136, 136, 136, 100);
    font-size: 14px;
    text-align: left;
    font-family: Microsoft Yahei;
    word-break: break-all;
  }
}

table {
  border-collapse: collapse; /* 合并单元格边框 */
  width: 230px; /* 表格宽度 */
  height: 100%; /* 表格高度 */
  overflow-y: scroll; /* 垂直滚动条 */
}

td {
  border: 1px solid #9e9e9e; /* 单元格边框样式 */
  text-align: center; /* 水平居中 */
  vertical-align: middle; /* 垂直居中 */
  padding: 5px; /* 内间距5px */
  font-size: 14px; /* 字体大小 */
  font-family: Microsoft Yahei; /* 字体 */
}

.dialog-footer button:first-child {
  margin-right: 10px;
}
:deep(.contentDialog.el-dialog) {
  width: 580px;
  padding: 0 0 50px 0;
  border-radius: 4px;
  background-color: rgba(255, 255, 255, 100);
  text-align: center;
}
:deep(.contentDialog.el-dialog__body) {
  color: rgba(96, 98, 102, 100);
  line-height: 24px;
  font-size: 14px;
  font-family: Helvetica-regular;
}
:deep(.contentDialog .el-dialog__header) {
  margin: 0;
  padding: 10px 20px;
  height: 25px;
  line-height: 25px;
  display: flex;
  justify-content: center;
  align-items: center;
}
:deep(.contentDialog .el-dialog__title) {
  color: rgba(48, 49, 51, 100);
  font-size: 18px;
  font-family: Helvetica-regular;
}
:deep(.contentDialog .el-dialog__headerbtn .el-dialog__close) {
  color: rgba(48, 49, 51, 100);
}
:deep(.contentDialog .el-dialog__headerbtn:hover .el-dialog__close) {
  color: rgba(48, 49, 51, 100);
}
:deep(.contentDialog .el-dialog__headerbtn) {
  top: 0px;
}
:deep(.contentDialog .el-dialog__footer) {
  position: absolute;
  bottom: 0px;
  left: 50%;
  transform: translateX(-50%);
}
</style>
